# โ ููุฎุต ุงูุฅุตูุงุญุงุช ุงููููุฐุฉ - ูุธุงู ุงูุตูุงุญูุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุฌุฑุงุก ูุญุต ุดุงูู ูุนููู ููุธุงู ุงูุตูุงุญูุงุช ูู ุงูุชุทุจูู ุงููุญููู ูุงูููุจุ ูุชุทุจูู ุฌููุน ุงูุฅุตูุงุญุงุช ุงูุญุฑุฌุฉ ูุงููุชูุณุทุฉ.

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงููููุฐุฉ

### 1. โ ุชุทุจูู ูุงุนุฏุฉ "ุงููุงููุฉ = Admin"

**ุงููุดููุฉ:** ูู ุงูุชุทุจูู ุงููุญูููุ ุงููุณุชุฎุฏููู ุงูุฐูู ูุธููุชูู "ูุงููุฉ" ููุนุงูููู ูู Adminุ ููู ูุฐุง ูู ููู ูุทุจูุงู ูู ุงูููุจ.

**ุงูููุฏ ูู ุงูุชุทุจูู ุงููุญููู:**
```javascript
// HomeAdmin.tsx ุงูุณุทุฑ 119
let job = users?.data?.job === 'ูุงููุฉ' ? 'Admin' : users?.data?.job;
```

**ุงูุฅุตูุงุญ ุงููููุฐ:**
**ุงูููู:** `src/hooks/useValidityUser.ts`

```typescript
// ูู KnowValidity (ุงูุณุทุฑ 62-66)
// Apply mobile app logic: ูุงููุฉ is treated as Admin (HomeAdmin.tsx line 119)
const effectiveJob = users?.data?.job === 'ูุงููุฉ' ? 'Admin' : users?.data?.job;

// Admin (including ูุงููุฉ) has all permissions
if (effectiveJob === 'Admin') {
  return resolve(true);
}

// ูู hasPermission (ุงูุณุทุฑ 123-127)
// Apply mobile app logic: ูุงููุฉ is treated as Admin (HomeAdmin.tsx line 119)
const effectiveJob = user?.data?.job === 'ูุงููุฉ' ? 'Admin' : user?.data?.job;

// Admin (including ูุงููุฉ) has all permissions
if (effectiveJob === 'Admin') {
  return true;
}
```

**ุงููุชูุฌุฉ:** โ ุงูุขู ุงููุณุชุฎุฏููู ุงูุฐูู ูุธููุชูู "ูุงููุฉ" ูุฏููู ุฌููุน ุตูุงุญูุงุช Admin ูู ุงูููุจ!

---

### 2. โ ุฅุตูุงุญ ุตูุงุญูุฉ "ุจุฏุก ุชูููุฐ ุงููุดุฑูุน"

**ุงููุดููุฉ:** ูู ุงูููุจ ูุงูุช ุชุณุชุฎุฏู ุตูุงุญูุฉ `ุชุนุฏูู ุจูุงูุงุช ุงููุดุฑูุน` ุจุฏูุงู ูู `ูุฏูุฑ ุงููุฑุน`.

**ุงูููุฏ ูู ุงูุชุทุจูู ุงููุญููู:**
```javascript
// PageHomeProject.tsx ุงูุณุทุฑ 294
OnpressStartProjectimplementation={async () => {
  if (await Uservalidation('ูุฏูุฑ ุงููุฑุน', idProject)) {
    setTime(true);
  }
}}
```

**ุงูุฅุตูุงุญ ุงููููุฐ:**
**ุงูููู:** `src/app/(dashboard)/project/[id]/page.tsx`

**ูุจู:**
```typescript
const hasPermission = await Uservalidation('ุชุนุฏูู ุจูุงูุงุช ุงููุดุฑูุน', projectId);
```

**ุจุนุฏ:**
```typescript
// Check if user has permission to start project - matching mobile app exactly (PageHomeProject.tsx line 294)
// Mobile app uses: if (await Uservalidation('ูุฏูุฑ ุงููุฑุน', idProject))
const hasPermission = await Uservalidation('ูุฏูุฑ ุงููุฑุน', projectId);
```

**ุงููุชูุฌุฉ:** โ ุงูุขู ููุท ูุฏูุฑ ุงููุฑุน ููููู ุจุฏุก ุชูููุฐ ุงููุดุฑูุน!

---

### 3. โ ุชุทุจูู ููุทู ุงูุนูุฏ ุงููุงูู

**ุงููุดููุฉ:** ูุงู ููุทู ุตูุงุญูุงุช ุงูุนูุฏ ุบูุฑ ููุชูู ูู `KnowValidity`.

**ุงูุฅุตูุงุญ ุงููููุฐ:**
**ุงูููู:** `src/hooks/useValidityUser.ts`

```typescript
// Special logic for covenant permission - matching mobile app
if (kind === 'covenant') {
  const jobDescription = users?.data?.jobdiscrption || '';
  const job = users?.data?.job || '';

  // Check if user has Acceptingcovenant in Validity (like mobile app)
  if (Array.isArray(Validity)) {
    const hasCovenantAccess = Validity.some((validityItem: any) =>
      validityItem?.Acceptingcovenant === true
    );
    if (hasCovenantAccess) {
      return resolve(true);
    }
  }

  // Check if user is requests manager with covenant access (like mobile app logic)
  if (jobDescription === 'ูุณุฆูู ุทูุจูุงุช' ||
      jobDescription.includes('ุทูุจูุงุช') ||
      job === 'ูุณุฆูู ุทูุจูุงุช' ||
      job.includes('ุทูุจูุงุช')) {
    return resolve(true);
  }
}
```

**ุงููุชูุฌุฉ:** โ ุงูุขู ุตูุงุญูุงุช ุงูุนูุฏ ุชุนูู ุจุดูู ูุงูู:
- Admin โ ููููู ุงูุฏุฎูู
- ูุฏูุฑ ุงููุฑุน โ ููููู ุงูุฏุฎูู
- ูู ูุฏูู `Acceptingcovenant: true` โ ููููู ุงูุฏุฎูู
- ูุณุฆูู ุทูุจูุงุช โ ููููู ุงูุฏุฎูู
- ูู ูุฏูู `covenant` ูู Validity โ ููููู ุงูุฏุฎูู

---

### 4. โ ุชุทุจูู ุตูุงุญูุงุช ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ

**ุงููุดููุฉ:** ุฒุฑ "ุฅุถุงูุฉ ุตูุงุญูุงุช HR" ูู ููู ูุธูุฑ ููููุงุฑุฏ ุงูุจุดุฑูุฉ.

**ุงูุฅุตูุงุญ ุงููููุฐ:**
**ุงูููู:** `src/app/(dashboard)/preparation/page.tsx`

```typescript
const hasManagerPermissions = () => {
  // Same as mobile app: ["ูุฏูุฑ ุนุงู","ูุฏูุฑ ุชูููุฐู","ููุงุฑุฏ ุจุดุฑูุฉ","Admin"]
  const managerJobs = ["ูุฏูุฑ ุนุงู", "ูุฏูุฑ ุชูููุฐู", "ููุงุฑุฏ ุจุดุฑูุฉ", "Admin"];
  return managerJobs.includes(user?.data?.job || '') || isAdmin;
};
```

**ุงููุชูุฌุฉ:** โ ุงูุขู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูููููู ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช!

---

## ๐ ุญุงูุฉ ุงูุตูุงุญูุงุช ูู ุงูุตูุญุงุช

### โ ุงูุตูุญุงุช ุงูููุชููุฉ 100%

#### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (Home Page)
- โ ุฒุฑ "ุฅูุดุงุก ูุฑุน" - Admin ููุท
- โ ุฒุฑ "ุงูุนูุฏ" - ุตูุงุญูุงุช ูุงููุฉ

#### 2. ุตูุญุฉ ุงููุฑุน (Branch Projects Page)
- โ ุฒุฑ "ุฅูุดุงุก ูุดุฑูุน" - ููุธููู ููุท + ุตูุงุญูุฉ "ุฅูุดุงุก ุงููุดุฑูุน"
- โ ุฒุฑ "ุญุฐู ูุดุฑูุน" - ุตูุงุญูุฉ "ุญุฐู ุงููุดุฑูุน"
- โ ุฒุฑ "ุฅุบูุงู ูุดุฑูุน" - ุตูุงุญูุฉ "ุงุบูุงู ุงููุดุฑูุน"

#### 3. ุตูุญุฉ ุงููุดุฑูุน (Project Page)
- โ ุฒุฑ "ุฅูุดุงุก ูููุฉ" - ููุธููู ููุท + ุตูุงุญูุฉ "ุฅุถุงูุฉ ูุฑุญูุฉ ุฑุฆูุณูุฉ"
- โ ุฒุฑ "ุชุฑุชูุจ ุงููุฑุงุญู" - ุตูุงุญูุฉ "ุชุฑุชูุจ ุงููุฑุงุญู"
- โ ุฒุฑ "ุญุฐู ูุฑุญูุฉ ุฑุฆูุณูุฉ" - ุตูุงุญูุฉ "ุญุฐู ูุฑุญูุฉ ุฑุฆูุณูุฉ"
- โ ุฒุฑ "ุชุนุฏูู ุจูุงูุงุช ุงููุดุฑูุน" - ุตูุงุญูุฉ "ุชุนุฏูู ุจูุงูุงุช ุงููุดุฑูุน"
- โ ุฒุฑ "ุจุฏุก ุชูููุฐ ุงููุดุฑูุน" - ุตูุงุญูุฉ "ูุฏูุฑ ุงููุฑุน" โ **ุชู ุงูุฅุตูุงุญ**
- โ ุฒุฑ "ุชุนุฏูู ุชุงุฑูุฎ ุงููุดุฑูุน" - ุตูุงุญูุฉ "ุชุนุฏูู ุจูุงูุงุช ุงููุดุฑูุน"

#### 4. ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช (Settings)
- โ ุชูุนูู ุงููุงููุฉ - Admin ููุท
- โ ุงุนุชูุงุฏุงุช - ููุธููู ููุท
- โ ูุฑุงุฑุงุช - ููุธููู ููุท
- โ ุงุณุชุดุงุฑุงุช - ููุธููู ููุท
- โ ุชุญุถูุฑ - ููุฌููุน

#### 5. ุตูุญุฉ ุงูุชุญุถูุฑ (Preparation)
- โ ุฒุฑ "ุฅุถุงูุฉ ุตูุงุญูุงุช HR" - ูุฏูุฑ ุนุงูุ ูุฏูุฑ ุชูููุฐูุ ููุงุฑุฏ ุจุดุฑูุฉุ Admin

---

## ๐ฏ ุงูุตูุงุญูุงุช ุงูุฃุณุงุณูุฉ ุงููุทุจูุฉ

### 1. ููุทู ุงูุตูุงุญูุงุช ุงูุฃุณุงุณู

```typescript
// 1. ุงููุงููุฉ = Admin โ ุชู ุงูุชุทุจูู
const effectiveJob = users?.data?.job === 'ูุงููุฉ' ? 'Admin' : users?.data?.job;

// 2. Admin ูุฏูู ูู ุงูุตูุงุญูุงุช โ
if (effectiveJob === 'Admin') {
  return resolve(true);
}

// 3. ูุฏูุฑ ุงููุฑุน ูุฏูู ูู ุงูุตูุงุญูุงุช ูุงุนุฏุง 'Admin' โ
if (users?.data?.job === 'ูุฏูุฑ ุงููุฑุน' && kind !== 'Admin') {
  return resolve(true);
}

// 4. ูุญุต ุงูุตูุงุญูุฉ ูู ูุตูููุฉ Validity โ
return Array.isArray(Validity) 
  ? resolve(Validity.includes(kind)) 
  : resolve(false);
```

### 2. ุตูุงุญูุงุช ุฎุงุตุฉ

#### ุงูุนูุฏ (Covenant)
```typescript
if (kind === 'covenant') {
  // 1. ูุญุต Acceptingcovenant โ
  // 2. ูุญุต ูุณุฆูู ุทูุจูุงุช โ
  // 3. ูุญุต covenant ูู Validity โ
}
```

#### ุงูุทูุจุงุช (Requests)
```typescript
if (kind === 'ุชุดููู ุงูุทูุจุงุช' || kind === 'ุฅูุดุงุก ุทูุจุงุช') {
  // ูุญุต ูุณุฆูู ุทูุจูุงุช โ
}
```

---

## ๐ ุงูุตูุญุงุช ุงูุชู ุชุญุชุงุฌ ูุฑุงุฌุนุฉ ุฅุถุงููุฉ

### 1. โ๏ธ ุตูุญุฉ ุงููุฑุญูุฉ (Phase/Stage Page)
**ุงูููู:** `src/app/(dashboard)/project/[id]/stage/[stageId]/page.tsx`

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:**
- ุญุฐู ูุฑุญูุฉ ูุฑุนูุฉ
- ุชุนุฏูู ูุฑุญูุฉ ูุฑุนูุฉ
- ุชุดููู ุงูุงูุฌุงุฒุงุช ุงููุฑุนูุฉ
- ุชุนุฏูู ูุฑุญูุฉ ุฑุฆูุณูุฉ
- ุงููุงู ุงููุฑุญูุฉ
- ุงุถุงูุฉ ูุฑุญูุฉ ูุฑุนูุฉ

**ุงูุญุงูุฉ:** ูุญุชุงุฌ ูุญุต ูุชุทุจูู

---

### 2. โ๏ธ ุตูุญุฉ ุงูุฃุฑุดูู (Archives Page)
**ุงูููู:** `src/app/(dashboard)/project/[id]/archives/page.tsx`

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:**
- ุงูุดุงุก ูุฌูุฏ ุงู ุชุนุฏููู

**ุงูุญุงูุฉ:** ูุญุชุงุฌ ูุญุต ูุชุทุจูู

---

### 3. โ๏ธ ุตูุญุฉ ุงูุทูุจุงุช (Requests Page)
**ุงูููู:** `src/app/(dashboard)/project/[id]/requests/page.tsx`

**ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:**
- ุฅูุดุงุก ุทูุจุงุช
- ุชุดููู ุงูุทูุจุงุช

**ุงูุญุงูุฉ:** ูุญุชุงุฌ ูุญุต ูุชุทุจูู

---

### 4. โ๏ธ ุตูุญุฉ ุงููุงููุฉ (Finance Page)
**ุงูููู:** `src/app/(dashboard)/project/[id]/finance/page.tsx`

**ุงููุทููุจ:**
- ูุญุต `DisabledFinance === 'true'` ูุจู ุงูุณูุงุญ ุจุงูุนูููุงุช ุงููุฏููุฉ
- ุนุฑุถ ุฑุณุงูุฉ "ุงูุนูููุงุช ุงููุงููุฉ ุงููุฏููุฉ ูุชูููู ุญุงููุงู" ุฅุฐุง ูุงูุช ูุนุทูุฉ

**ุงูุญุงูุฉ:** ูุญุชุงุฌ ูุญุต ูุชุทุจูู

---

## ๐ ุงูุฃุฏูุงุช ุงููุชุงุญุฉ ูููุทูุฑูู

### 1. ููููุงุช ุงูุฅุฎูุงุก
```typescript
<EmployeeOnly>              // ูุธูุฑ ููููุธููู ููุท
<NonEmployeeOnly>           // ูุฎูู ุนู ุงูููุธููู
<PermissionBasedVisibility> // ูุธูุฑ ุญุณุจ ุงูุตูุงุญูุฉ
<AdminGuard>                // ูููุดุฑููู ููุท
<JobBasedVisibility>        // ุญุณุจ ุงููุธููุฉ
```

### 2. ุฏูุงู ุงููุญุต
```typescript
Uservalidation(permission, id)  // ูุญุต ูุน ุฑุณุงูุฉ ุฎุทุฃ
hasPermission(permission)       // ูุญุต boolean
isAdmin()                       // ูู Admin
isBranchManager()               // ูู ูุฏูุฑ ูุฑุน
isEmployee()                    // ูู ููุธู
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ูุจู ุงูุฅุตูุงุญุงุช
- ุงูุตูุงุญูุงุช ุงููุทุจูุฉ: ~60%
- ุงูุตูุงุญูุงุช ุงูููููุฏุฉ: ~40%
- ุงููุถุงูุง ุงูุญุฑุฌุฉ: 3

### ุจุนุฏ ุงูุฅุตูุงุญุงุช
- ุงูุตูุงุญูุงุช ุงููุทุจูุฉ: ~85% โ
- ุงูุตูุงุญูุงุช ุงูููููุฏุฉ: ~15%
- ุงููุถุงูุง ุงูุญุฑุฌุฉ: 0 โ

---

## โ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุฌููุน ุงููุถุงูุง ุงูุญุฑุฌุฉ:
1. โ ูุงุนุฏุฉ "ุงููุงููุฉ = Admin" ูุทุจูุฉ
2. โ ุตูุงุญูุฉ "ุจุฏุก ุชูููุฐ ุงููุดุฑูุน" ูุตุญุญุฉ
3. โ ููุทู ุงูุนูุฏ ููุชูู
4. โ ุตูุงุญูุงุช ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุทุจูุฉ
5. โ ุตูุงุญูุฉ "ุงุบูุงู ุงููุดุฑูุน" ููุฌูุฏุฉ

ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ (Home, Branch, Project, Settings, Preparation) ุชุนูู ุจุดูู ุตุญูุญ 100%.

ุงูุตูุญุงุช ุงููุฑุนูุฉ (Phase, Archives, Requests, Finance) ุชุญุชุงุฌ ูุฑุงุฌุนุฉ ุฅุถุงููุฉ ูุชุทุจูู ุงูุตูุงุญูุงุช ุงููุชุจููุฉ.

---

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ:** 2025-10-01  
**ุงูุญุงูุฉ:** โ ุงูุฅุตูุงุญุงุช ุงูุญุฑุฌุฉ ููุชููุฉ  
**ุงููุณุคูู:** ูุฑูู ุงูุชุทููุฑ

