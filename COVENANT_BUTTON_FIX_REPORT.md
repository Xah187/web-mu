# ๐ง ุชูุฑูุฑ ุฅุตูุงุญ ุฒุฑ ุงูุนูุฏ - ูุทุงุจูุฉ ูุงููุฉ ููุชุทุจูู ุงููุญููู

## โ ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ!

---

## ๐ ุงููุดููุฉ ุงูููุชุดูุฉ

### ูู ุงูุชุทุจูู ุงููุญููู:
**ุงูููู:** `Src/Screens/HomeAdmin.tsx` (ุงูุณุทุฑ 439-461)

```javascript
// ุงูุณุทุฑ 119: ุงููุงููุฉ ุชูุนุงูู ูู Admin
let job = users?.data?.job === 'ูุงููุฉ' ? 'Admin' : users?.data?.job;

// ุงูุณุทุฑ 439: ุงูุฒุฑ ูุธูุฑ ููุท ููู Admin
{job === 'Admin' && (
  <ButtonCreat
    onpress={async () => {
      const results = await Uservalidation('covenant');
      navigation.navigate('CovenantBrinsh', {
        IDCompanyBransh: 0,
        Acceptingcovenant: results,
      });
    }}
    text="ุงูุนูุฏ"
    number={BrinshData?.Covenantnumber}
  />
)}
```

**ูู ูุฑู ุงูุฒุฑ ูู ุงูุชุทุจูู ุงููุญููู:**
- โ **Admin** (job === 'Admin')
- โ **ูุงููุฉ** (ุชูุนุงูู ูู Admin)
- โ **ูุฏูุฑ ุงููุฑุน** - ูุง ูุฑู ุงูุฒุฑ
- โ **ูู ูุฏูู Acceptingcovenant** - ูุง ูุฑู ุงูุฒุฑ
- โ **ูุณุฆูู ุทูุจูุงุช** - ูุง ูุฑู ุงูุฒุฑ

---

### ูู ุงูููุจ (ูุจู ุงูุฅุตูุงุญ):
**ุงูููู:** `src/app/(dashboard)/home/page.tsx`

```typescript
// โ ูุงู ูุณุชุฎุฏู PermissionBasedVisibility
<PermissionBasedVisibility permission="covenant">
  <ButtonCreat
    text="ุงูุนูุฏ"
    number={homeData?.Covenantnumber || user?.data?.Covenantnumber || 0}
    onpress={handleCovenant}
  />
</PermissionBasedVisibility>
```

**ูู ูุงู ูุฑู ุงูุฒุฑ ูู ุงูููุจ (ูุจู ุงูุฅุตูุงุญ):**
- โ **Admin**
- โ **ูุงููุฉ**
- โ **ูุฏูุฑ ุงููุฑุน** โ โ ุฎุทุฃ! ูุง ูุฌุจ ุฃู ูุฑุงู
- โ **ูู ูุฏูู Acceptingcovenant** โ โ ุฎุทุฃ! ูุง ูุฌุจ ุฃู ูุฑุงู
- โ **ูุณุฆูู ุทูุจูุงุช** โ โ ุฎุทุฃ! ูุง ูุฌุจ ุฃู ูุฑุงู
- โ **ูู ูุฏูู 'covenant' ูู Validity** โ โ ุฎุทุฃ! ูุง ูุฌุจ ุฃู ูุฑุงู

---

## ๐ง ุงูุฅุตูุงุญ ุงููููุฐ

### ูู ุงูููุจ (ุจุนุฏ ุงูุฅุตูุงุญ):
**ุงูููู:** `src/app/(dashboard)/home/page.tsx`

```typescript
// โ ุชู ุงุณุชุจุฏุงู PermissionBasedVisibility ุจู AdminGuard
{/* Covenant - show ONLY for Admin (matching mobile app exactly: HomeAdmin.tsx line 439) */}
{/* Mobile app: {job === 'Admin' && <ButtonCreat text="ุงูุนูุฏ" />} */}
{/* Note: ูุงููุฉ is treated as Admin (job = 'ูุงููุฉ' ? 'Admin' : job) */}
<AdminGuard>
  <ButtonCreat
    text="ุงูุนูุฏ"
    number={homeData?.Covenantnumber || user?.data?.Covenantnumber || 0}
    onpress={handleCovenant}
    className="px-4 py-2.5 text-center text-sm whitespace-nowrap"
  />
</AdminGuard>
```

**ูู ูุฑู ุงูุฒุฑ ูู ุงูููุจ (ุจุนุฏ ุงูุฅุตูุงุญ):**
- โ **Admin** (job === 'Admin')
- โ **ูุงููุฉ** (ุชูุนุงูู ูู Admin)
- โ **ูุฏูุฑ ุงููุฑุน** - ูุง ูุฑู ุงูุฒุฑ โ **ุชู ุงูุฅุตูุงุญ**
- โ **ูู ูุฏูู Acceptingcovenant** - ูุง ูุฑู ุงูุฒุฑ โ **ุชู ุงูุฅุตูุงุญ**
- โ **ูุณุฆูู ุทูุจูุงุช** - ูุง ูุฑู ุงูุฒุฑ โ **ุชู ุงูุฅุตูุงุญ**

---

## ๐ ุฌุฏูู ุงูููุงุฑูุฉ

| ุงููุณุชุฎุฏู | ุงูุชุทุจูู ุงููุญููู | ุงูููุจ (ูุจู) | ุงูููุจ (ุจุนุฏ) | ุงูุญุงูุฉ |
|---------|-----------------|-------------|-------------|--------|
| **Admin** | โ ูุธูุฑ | โ ูุธูุฑ | โ ูุธูุฑ | โ ูุชุทุงุจู |
| **ูุงููุฉ** | โ ูุธูุฑ | โ ูุธูุฑ | โ ูุธูุฑ | โ ูุชุทุงุจู |
| **ูุฏูุฑ ุงููุฑุน** | โ ูุง ูุธูุฑ | โ ูุธูุฑ | โ ูุง ูุธูุฑ | โ **ุชู ุงูุฅุตูุงุญ** |
| **Acceptingcovenant** | โ ูุง ูุธูุฑ | โ ูุธูุฑ | โ ูุง ูุธูุฑ | โ **ุชู ุงูุฅุตูุงุญ** |
| **ูุณุฆูู ุทูุจูุงุช** | โ ูุง ูุธูุฑ | โ ูุธูุฑ | โ ูุง ูุธูุฑ | โ **ุชู ุงูุฅุตูุงุญ** |
| **ููุธู ุนุงุฏู** | โ ูุง ูุธูุฑ | โ ูุง ูุธูุฑ | โ ูุง ูุธูุฑ | โ ูุชุทุงุจู |

---

## ๐ฏ ุงูุชุญููู ุงูุนููู

### ููุงุฐุง ุงูุฒุฑ ูุธูุฑ ููุท ููู Admin ูู ุงูุชุทุจูู ุงููุญูููุ

#### 1. **ุงูููุณูุฉ:**
- ุฒุฑ ุงูุนูุฏ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูู **ุงุฎุชุตุงุฑ ุณุฑูุน** ูููุตูู ุฅูู ุตูุญุฉ ุงูุนูุฏ
- ูุฐุง ุงูุงุฎุชุตุงุฑ **ูุฎุตุต ููุฅุฏุงุฑุฉ ููุท** (Admin)
- ุจุงูู ุงููุณุชุฎุฏููู ูููููู ุงููุตูู ุฅูู ุงูุนูุฏ ูู ุฃูุงูู ุฃุฎุฑู ุฅุฐุง ูุงู ูุฏููู ุตูุงุญูุงุช

#### 2. **ุงูููุทู:**
```javascript
// ูู ุงูุชุทุจูู ุงููุญููู
{job === 'Admin' && (
  <ButtonCreat
    onpress={async () => {
      // ูุญุต ุฅุถุงูู ุนูุฏ ุงูุถุบุท
      const results = await Uservalidation('covenant');
      navigation.navigate('CovenantBrinsh', {
        IDCompanyBransh: 0,
        Acceptingcovenant: results, // true ุฃู false
      });
    }}
    text="ุงูุนูุฏ"
  />
)}
```

**ููุงุญุธุฉ ูููุฉ:**
- ุงูุฒุฑ ูุธูุฑ ููู Admin ููุท
- ุนูุฏ ุงูุถุบุทุ ูุชู ูุญุต ุตูุงุญูุฉ `covenant` ูุฑุฉ ุฃุฎุฑู
- ุงููุชูุฌุฉ (`results`) ุชููุฑุฑ ุฅูู ุตูุญุฉ ุงูุนูุฏ ูู `Acceptingcovenant`
- ูุฐุง ูุญุฏุฏ ูุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ููููู **ุฅูุดุงุก ุทูุจุงุช** ุฃู ููุท **ุนุฑุถ ุงูุทูุจุงุช**

#### 3. **ุงูุณููุงุฑูููุงุช:**

**ุงูุณููุงุฑูู 1: Admin ูุฏูู ุตูุงุญูุฉ covenant**
```
1. ุงูุฒุฑ ูุธูุฑ โ
2. ูุถุบุท ุนูู ุงูุฒุฑ
3. Uservalidation('covenant') โ true โ
4. ููุชูู ุฅูู ุตูุญุฉ ุงูุนูุฏ
5. ููููู ุฅูุดุงุก ุทูุจุงุช โ
```

**ุงูุณููุงุฑูู 2: Admin ููุณ ูุฏูู ุตูุงุญูุฉ covenant**
```
1. ุงูุฒุฑ ูุธูุฑ โ
2. ูุถุบุท ุนูู ุงูุฒุฑ
3. Uservalidation('covenant') โ false โ
4. ุฑุณุงูุฉ ุฎุทุฃ: "ููุณ ูู ูุทุงู ุตูุงุญูุงุชู"
5. ูุง ููุชูู ุฅูู ุตูุญุฉ ุงูุนูุฏ
```

**ุงูุณููุงุฑูู 3: ูุฏูุฑ ุงููุฑุน ูุฏูู ุตูุงุญูุฉ covenant**
```
1. ุงูุฒุฑ ูุง ูุธูุฑ โ
2. ูุง ููููู ุงููุตูู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. ููููู ุงููุตูู ูู ุฃูุงูู ุฃุฎุฑู (ุฅุฐุง ูุงูุช ููุฌูุฏุฉ)
```

---

## ๐ ุงููุฑู ุจูู `AdminGuard` ู `PermissionBasedVisibility`

### `AdminGuard`:
```typescript
// ููุญุต ููุท: ูู ุงููุณุชุฎุฏู Adminุ
const isAdmin = user?.data?.job === 'Admin' || user?.data?.job === 'ูุงููุฉ';
if (isAdmin) {
  return <>{children}</>;
}
return null; // ูุง ูุธูุฑ
```

**ูุธูุฑ ูู:**
- โ Admin
- โ ูุงููุฉ (ุชูุนุงูู ูู Admin)

---

### `PermissionBasedVisibility permission="covenant"`:
```typescript
// ููุญุต: ูู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ covenantุ
const hasPermission = (kind: 'covenant'): boolean => {
  // 1. Admin โ true
  if (effectiveJob === 'Admin') return true;
  
  // 2. ูุฏูุฑ ุงููุฑุน โ true
  if (user?.data?.job === 'ูุฏูุฑ ุงููุฑุน') return true;
  
  // 3. ูุฏูู Acceptingcovenant โ true
  if (Validity.some(v => v?.Acceptingcovenant === true)) return true;
  
  // 4. ูุณุฆูู ุทูุจูุงุช โ true
  if (job.includes('ุทูุจูุงุช')) return true;
  
  // 5. ูุฏูู 'covenant' ูู Validity โ true
  if (Validity.includes('covenant')) return true;
  
  return false;
};
```

**ูุธูุฑ ูู:**
- โ Admin
- โ ูุงููุฉ
- โ ูุฏูุฑ ุงููุฑุน
- โ ูู ูุฏูู Acceptingcovenant
- โ ูุณุฆูู ุทูุจูุงุช
- โ ูู ูุฏูู 'covenant' ูู Validity

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ูุจู ุงูุฅุตูุงุญ:
```typescript
// โ ูุงู ูุธูุฑ ููู ูู ูุฏูู ุตูุงุญูุฉ covenant
<PermissionBasedVisibility permission="covenant">
  <ButtonCreat text="ุงูุนูุฏ" />
</PermissionBasedVisibility>
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```typescript
// โ ูุธูุฑ ููุท ููู Admin (ูุซู ุงูุชุทุจูู ุงููุญููู ุจุงูุถุจุท)
<AdminGuard>
  <ButtonCreat text="ุงูุนูุฏ" />
</AdminGuard>
```

---

## ๐ ููุชุญูู

### ุงุฎุชุจุงุฑ 1: Admin
```bash
1. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ Admin
2. ุงุฐูุจ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. โ ุณุชุฌุฏ ุฒุฑ "ุงูุนูุฏ" ุธุงูุฑ
4. ุงุถุบุท ุนูู ุงูุฒุฑ
5. โ ุณุชูุชูู ุฅูู ุตูุญุฉ ุงูุนูุฏ
```

### ุงุฎุชุจุงุฑ 2: ูุงููุฉ
```bash
1. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ ูุงููุฉ
2. ุงุฐูุจ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. โ ุณุชุฌุฏ ุฒุฑ "ุงูุนูุฏ" ุธุงูุฑ (ูุฃู ุงููุงููุฉ ุชูุนุงูู ูู Admin)
4. ุงุถุบุท ุนูู ุงูุฒุฑ
5. โ ุณุชูุชูู ุฅูู ุตูุญุฉ ุงูุนูุฏ
```

### ุงุฎุชุจุงุฑ 3: ูุฏูุฑ ุงููุฑุน
```bash
1. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ ูุฏูุฑ ุงููุฑุน
2. ุงุฐูุจ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. โ ูู ุชุฌุฏ ุฒุฑ "ุงูุนูุฏ" (ุชู ุงูุฅุตูุงุญ โ)
4. ุงูุฒุฑ ูุฎูู ุชูุงูุงู
```

### ุงุฎุชุจุงุฑ 4: ููุธู ูุฏูู Acceptingcovenant
```bash
1. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ ูุฏูู Acceptingcovenant: true
2. ุงุฐูุจ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. โ ูู ุชุฌุฏ ุฒุฑ "ุงูุนูุฏ" (ุชู ุงูุฅุตูุงุญ โ)
4. ุงูุฒุฑ ูุฎูู ุชูุงูุงู
```

### ุงุฎุชุจุงุฑ 5: ูุณุฆูู ุทูุจูุงุช
```bash
1. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ ูุณุฆูู ุทูุจูุงุช
2. ุงุฐูุจ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
3. โ ูู ุชุฌุฏ ุฒุฑ "ุงูุนูุฏ" (ุชู ุงูุฅุตูุงุญ โ)
4. ุงูุฒุฑ ูุฎูู ุชูุงูุงู
```

---

## ๐ ุงูุฎูุงุตุฉ

### ูุง ุชู ุฅุตูุงุญู:
1. โ **ุฒุฑ ุงูุนูุฏ ูุธูุฑ ููุท ููู Admin ูุงููุงููุฉ** (ูุซู ุงูุชุทุจูู ุงููุญููู ุจุงูุถุจุท)
2. โ **ูุฏูุฑ ุงููุฑุน ูุง ูุฑู ุงูุฒุฑ** (ุชู ุงูุฅุตูุงุญ)
3. โ **ูู ูุฏูู Acceptingcovenant ูุง ูุฑู ุงูุฒุฑ** (ุชู ุงูุฅุตูุงุญ)
4. โ **ูุณุฆูู ุทูุจูุงุช ูุง ูุฑู ุงูุฒุฑ** (ุชู ุงูุฅุตูุงุญ)
5. โ **ุชู ุฅุถุงูุฉ ุชุนูููุงุช ุชูุถูุญูุฉ** ุชุดูุฑ ุฅูู ุงูุณุทุฑ ุงูููุงุจู ูู ุงูุชุทุจูู ุงููุญููู

### ุงููููุงุช ุงููุนุฏูุฉ:
- โ `src/app/(dashboard)/home/page.tsx`

### ุงูุชุทุงุจู ูุน ุงูุชุทุจูู ุงููุญููู:
- โ **100% ูุทุงุจู** ููุชุทุจูู ุงููุญููู (`Src/Screens/HomeAdmin.tsx` ุงูุณุทุฑ 439)

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2025-10-02  
**ุงูุญุงูุฉ:** โ **ููุชูู ููุทุงุจู 100%**

๐ **ุงูุขู ุฒุฑ ุงูุนูุฏ ูุนูู ุจููุณ ุงูุทุฑููุฉ ุชูุงูุงู ูู ุงูุชุทุจูู ุงููุญููู ูุงูููุจ!** ๐

